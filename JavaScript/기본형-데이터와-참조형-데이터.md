## 기본형 데이터와 참조형 데이터
### 불변값
- 변수(variable)와 상수(constant)를 구분하는 성질은 '변경 가능성', 이 변경 가능성의 대상은 **변수 영역 메모리**.
  - 한 번 데이터 할당이 이뤄진 변수 공간에 다른 데이터를 재할당할 수 있는지 여부가 관건.
- **불변성** 여부를 구분할 때의 변경 가능성의 대상은 **데이터 영역 메모리**.

기본형 데이터(숫자, 문자열, Boolean, null, undefined, Symbol)는 모두 불변값.

```js
var a = 'abc';
a = a + 'def'; 
// 기존 'abc'에 추가하지 않고 'abcdef'라는 새로운 문자열을 만들어 a에 저장한다.

var b = 5;
var c = 5;
b = 7;
// 기존 5를 7로 바꾸는 것이 아니라, 7에 해당하는 주소값을 b에 저장한다.
```
기본형 데이터의 변경은 새로 만드는 동작을 통해서만 이뤄진다. ➡️ 불변값의 성질
한 번 만들어진 값은 가비지 컬렉팅을 당하지 않는 한 영원히 변하지 않음.
### 가변값
- 참조형의 기본적인 성질은 가변값인 경우가 많다.
  - 설정에 따라 변경 불가능한 경우나, 아예 불변값으로 활용하는 방안도 있음.

```js
var obj1 = {
  a: 1,
  b: 'bbb'
};
```
- 기본형과의 차이는 '객체 변수(프로퍼티) 영역'이 별도로 존재한다는 점.
- 객체가 별도로 할애한 영역은 변수 영역일뿐 '데이터 영역'은 기존의 메모리 공간을 기본형 데이터와 같이 그대로 활용
- 데이터 영역에 저장된 값은 전부 불변값.
- 하지만 변수 영역에는 다른 값을 얼마든지 대입할 수 있음.
  - 이 부분 때문에 흔히 참조형 데이터는 불변하지 않다(가변값)라고 하는 것.
```js
var obj1 = {
  a: 1,
  b: 'bbb'
};
obj1.a = 2;
// 변수 obj1이 바라보고 있는 주소는 변하지 않고 즉, 새로운 객체가 만들어진 것이 아니라, 기존의 객체 내부의 값만 바뀐 것.
```
```js
var obj = {
  x: 3,
  arr: [3, 4, 5]
};
obj.arr = 'str';
```
- 참조형 데이터의 프로퍼티에 다시 또 참조형 데이터를 할당하는 경우를 중첩 객체(nested object)라고 함.
  - 이 경우 일반적인 참조형 데이터에서 또 한 단계가 더 생긴다. 배열의 변수 영역 생성
- 어떤 데이터에 대해 자신의 주소를 참조하는 변수의 개수를 참조 카운트라고 한다.
  - 참조 카운트가 0인 메모리 주소는 가비지 컬렉터의 수거 대상이 됨.
### 변수 복사
1. 변수 복사 이후 값 변경 결과 비교 - 객체의 프로퍼티 변경 시
```js
var a = 10;
var b = a;
var obj1 = { c: 10, d: 'ddd'};
var obj2 = obj1;

b = 15;
obj2.c = 20;

// a !== b
// obj1 === obj2
```
- 어떤 데이터 타입이든 변수에 할당하기 위해선 주소를 복사해야 하기 때문에 엄밀히 따지면 자바스크립트의 모든 데이터 타입은 참조형 데이터임.
  - 기본형은 주솟값을 복사하는 과정이 한 번만 이뤄지고, 참조형은 한 단계를 더 거치게 된다는 차이.     

2. 변수 복사 이후 값 변경 결과 비교 - 객체 자체를 변경했을 때  
```js
var a = 10;
var b = a;
var obj1 = { c: 10, d: 'ddd'};
var obj2 = obj1;

b = 15;
obj2 = { c: 20, d: 'ddd'};

// a !== b
// obj1 !== obj2
```      
- 즉, 참조형 데이터가 '가변값'이라고 설명할 때의 '가변'은 참조형 데이터 자체를 변경할 경우가 아니라, 그 내부의 프로퍼티를 변경할 때만 성립함.

----
#### ✅ 참조
- 📚 '코어 자바스크립트', 정재남.
